<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>State Abstractions</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-markdown>
                  <textarea data-template>
                    # State Abstractions
                  </textarea>
                </section>
                <section>
                  <section data-markdown>
                    <textarea data-template>
                      ## Motivation
                    </textarea>
                  </section>
                  <section>
                    <img src="images/gun-shop.jpg"/>
                  </section>
                  <section>
                    "A programming language that doesn't change the way you think is not worth learning." (Alan Perlis)
                  </section>
                  <section>
                    <img style="float: left; width: 150px; margin: 40px" src="images/ruby.png"/>
                    <img style="float: left; width: 150px; margin: 40px" src="images/clojure.png"/>
                    <img style="float: left; width: 150px; margin: 40px" src="images/haskell.png"/>
                    <img style="float: left; width: 150px; margin: 40px" src="images/elixir.png"/>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      ## State
                      <img style="" src="images/mailbox.jpg"/>
                    </textarea>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      ## Common example
                      logger
                    </textarea>
                  </section>
                </section>
				<section>
                  <section data-markdown>
                    <textarea data-template>
                      #### Abstraction 1:
                      ## pointer to memory location
                    </textarea>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      ## Ruby
                      <img style="width: 300px" src="images/ruby.png"/>
                    </textarea>
                  </section>
                  <section>
                    <pre>
                      <code class="ruby hljs" data-trim data-noescape>
                        class Math
                          def add1(x) do
                            x + 1
                          end

                          def square(x) do
                            x * x
                          end
                        end

                        m = Math.new
                        m.square(m.add(1)) # => 4
                      </code>
                    </pre>
                  </section>
                  <section>
                    <pre>
                      <code class="ruby hljs" data-trim data-noescape>
                        class Math<span class="fragment" data-fragment-index="0">
                          def initialize
                            @log = ""
                          end</span>

                          def add1(x) do
                            <span class="fragment" data-fragment-index="1">@log += "add1"</span>
                            x + 1
                          end

                          def square(x) do
                            <span class="fragment" data-fragment-index="1">@log += "square"</span>
                            x * x
                          end
                        end

                        m = Math.new
                        m.square(m.add(1)) # => 4
                        <span class="fragment" data-fragment-index="2">m.log # => "add1square"</span>
                      </code>
                    </pre>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      OK.
                      <br>
                      <br>
                      So, what's the deal with Ruby?
                    </textarea>
                  </section>
                  <section>
                    <span class="fragment highlight-red" data-fragment-index="0">Everything</span> is an object.
                    <pre>
                      <code class="ruby hljs" data-trim data-noescape>
                        <span class="fragment" data-fragment-index="1">1.class # => Fixnum</span>
                        <span class="fragment" data-fragment-index="2">true.class # => TrueClass</span>
                      </code>
                    </pre>
                    <div class="fragment" data-fragment-index="3">
                      <span style="color: orange">Including classes</span> themselves.
                      <pre>
                        <code class="ruby hljs" data-trim data-noescape>
                          <span class="fragment" data-fragment-index="4">RuntimeClass = Class.new
                          <span class="fragment" data-fragment-index="5">RuntimeClass.class # => Class</span>
                        </code>
                      <pre>
                    </div>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      [ruby-lang.org](ruby-lang.org)
                    </textarea>
                  </section>
                </section>
                <section>
                  <section data-markdown>
                    <textarea data-template>
                      #### Abstraction 2:
                      ## software transactional memory
                    </textarea>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      ## Clojure
                      <img style="width: 300px" src="images/clojure.png"/>
                    </textarea>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      ## State + time = identity
                      <div style="float: left; margin: 40px"></div>
                      <img style="float: left; width: 300px; margin: 40px" src="images/eraser.jpeg"/>
                      <img style="float: left; width: 300px; margin: 40px" src="images/flip-book.jpeg"/>
                    </textarea>
                  </section>
                  <section>
                    <pre>
                      <code class="clojure hljs" data-trim data-noescape>
                        (def log (atom ""))

                        (do
                          (future
                            (swap! log (fn [l] (str l "foo"))))
                          (future
                            (swap! log (fn [l] (str l "bar")))))

                        @log<span class="fragment" data-fragment-index="0"> ; => "foobar"</span>
                      </code>
                    </pre>
                  </section>
                  <section>
                    <pre>
                      <code class="clojure hljs" data-trim data-noescape>
                        (def log (atom ""))

                        (do
                          (future
                            (swap! log (fn [l] (do (Thread/sleep 1000) (str l "foo")))))
                          (future
                            (swap! log (fn [l] (str l "bar")))))

                        <span class="fragment fade-out" data-fragment-index="1">@log<span class="fragment" data-fragment-index="0"> ; => "foo" ?</span></span>
                        <span class="fragment fade-in" data-fragment-index="1">@log ; => "barfoo"</span>
                      </code>
                    </pre>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      <img style="height: 600px" src="images/stm.png"/>
                    </textarea>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      [clojure.org](clojure.org)
                    </textarea>
                  </section>
                </section>
                <section>
                  <section data-markdown>
                    <textarea data-template>
                      #### Abstraction 3:
                      ## monadic function composition
                    </textarea>
                  </section>
                  <section data-markdown>
                    <textarea data-template>
                      ## Haskell
                      <img style="width: 300px" src="images/haskell.png"/>
                    </textarea>
                  </section>
                  <section>
                    <h2>No eraser.</h2>
                    <span class="fragment" data-fragment-index="0"><h2>No flip book.</h2></span>
                    <span class="fragment" data-fragment-index="1"><h2>Just <span style="color: orange">function composition</span>.</h2></span>
                  </section>
                  <section>
                    <pre>
                      <code class="haskell hljs" data-trim data-noescape>
                        add1 (x, log) = (x + 1, log ++ "add1")

                        square x = x * x

                        square(add1 1)

                        <span class="fragment" data-fragment-index="0">(square . add1) 1</span>

                        <span class="fragment" data-fragment-index="1">:type (.) -- > (.) :: (b -> c) -> (a -> b) -> (a -> c)</span>
                      </code>
                    </pre>
                  </section>
                  <section>
                    <pre>
                      <code class="haskell hljs" data-trim data-noescape>
                        add1 <span class="fragment" data-fragment-index="0">(</span>x<span class="fragment" data-fragment-index="0">, log)</span> = <span class="fragment" data-fragment-index="0">(</span>x + 1<span class="fragment" data-fragment-index="0">, log ++ "add1")</span>

                        square <span class="fragment" data-fragment-index="0">(</span>x<span class="fragment" data-fragment-index="0">, log)</span> = <span class="fragment" data-fragment-index="0">(</span>x * x<span class="fragment" data-fragment-index="0">, log ++ "square")</span>

                        <span class="fragment" data-fragment-index="1">sub1 <span class="fragment" data-fragment-index="2">(</span>x<span class="fragment" data-fragment-index="2">, log)</span> = <span class="fragment" data-fragment-index="2">(</span>x - 1<span class="fragment" data-fragment-index="2">, log)</span></span>

                        square(<span class="fragment" data-fragment-index="0">sub1(</span>add1 <span class="fragment" data-fragment-index="0">(</span>1<span class="fragment" data-fragment-index="0">, "")</span>))

                        (square <span class="fragment" data-fragment-index="0">. sub1</span> . add1) (1, "")
                      </code>
                    </pre>
                  </section>
                </section>
                <section>
                  <section data-markdown>
                    <textarea data-template>
                      #### Abstraction 4:
                      ## process
                    </textarea>
                  </section>
                </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
                history: true,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
